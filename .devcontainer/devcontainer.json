{
  "name": "Codespace Tailscale",

  "runArgs": [
    "--device=/dev/net/tun",
    "--cap-add=NET_ADMIN"
  ],

  "features": {
    "ghcr.io/tailscale/codespace/tailscale:latest": {
      // Pass the auth key directly from the environment
      "authkey": "${env:TS_AUTH_KEY}",
      "hostname": "codespace-exit",
      "advertiseExitNode": true,
    }
  },

  "postCreateCommand": "tailscale status"
}
